<!-- Hero Section -->
<section class="donate-hero">
  <div class="hero-overlay"></div>
  <div class="hero-content">
    <h1 class="hero-title">Make a Difference Today</h1>
    <p class="hero-subtitle">Every contribution brings happiness to those in need</p>
    <div class="hero-stats">
      <div class="stat-item">
        <span class="stat-number">{{ fundraisingGoal.donors.toLocaleString() }}</span>
        <span class="stat-label">Donors</span>
      </div>
      <div class="stat-item">
        <span class="stat-number">‚Çπ{{ (fundraisingGoal.current / 1000).toFixed(0) }}K</span>
        <span class="stat-label">Raised</span>
      </div>
      <div class="stat-item">
        <span class="stat-number">85%</span>
        <span class="stat-label">To Programs</span>
      </div>
    </div>
  </div>
</section>

<!-- Fundraising Progress -->
<section class="progress-section fade-in-on-scroll">
  <div class="container">
    <h2 class="section-title">Current Campaign Progress</h2>
    <div class="progress-bar-large">
      <div class="progress-fill" [style.width.%]="getProgressPercentage()"></div>
    </div>
    <div class="progress-stats">
      <span>‚Çπ{{ fundraisingGoal.current.toLocaleString() }} raised</span>
      <span class="goal-text">Goal: ‚Çπ{{ fundraisingGoal.target.toLocaleString() }}</span>
    </div>
  </div>
</section>

<!-- Donation Amount Selection -->
<section class="donation-selection fade-in-on-scroll">
  <div class="container">
    <h2 class="section-title">Choose Your Donation Amount</h2>
    
    <!-- Donation Type Toggle -->
    <div class="donation-type-toggle">
      <button 
        [class.active]="donationType === 'one-time'"
        (click)="donationType = 'one-time'">
        One-Time
      </button>
      <button 
        [class.active]="donationType === 'monthly'"
        (click)="donationType = 'monthly'">
        Monthly üíù
      </button>
      <button 
        [class.active]="donationType === 'yearly'"
        (click)="donationType = 'yearly'">
        Yearly
      </button>
    </div>

    <!-- Donation Amount Cards -->
    <div class="donation-cards">
      <div 
        *ngFor="let option of donationOptions"
        class="donation-card"
        [class.selected]="selectedAmount === option.amount && !customAmount"
        (click)="selectAmount(option.amount)">
        <div class="card-badge">{{ option.badge }}</div>
        <div class="card-icon">{{ option.icon }}</div>
        <div class="card-amount">{{ option.label }}</div>
        <div class="card-impact">{{ option.impact }}</div>
      </div>

      <!-- Custom Amount Card -->
      <div 
        class="donation-card custom-card"
        [class.selected]="customAmount !== null">
        <div class="card-icon">üí∞</div>
        <div class="card-amount">Custom</div>
        <input 
          type="number" 
          [(ngModel)]="customAmount"
          (input)="setCustomAmount()"
          placeholder="Enter amount"
          class="custom-input"
          min="100">
      </div>
    </div>

    <!-- Impact Calculator -->
    <div class="impact-calculator">
      <div class="impact-icon">‚ú®</div>
      <p class="impact-message">{{ getImpactMessage() }}</p>
    </div>

    <!-- Donate Button -->
    <button class="donate-btn-large" (click)="proceedToDonate()">
      Donate ‚Çπ{{ (customAmount || selectedAmount).toLocaleString() }} {{ donationType === 'monthly' ? '/month' : '' }}
    </button>
  </div>
</section>

<!-- Payment Methods -->
<section class="payment-methods fade-in-on-scroll">
  <div class="container">
    <h2 class="section-title">Choose Payment Method</h2>
    <p class="section-subtitle">Select your preferred way to donate ‚Çπ{{ (customAmount || selectedAmount).toLocaleString() }}</p>
    <div class="payment-grid">
      <div 
        *ngFor="let method of paymentMethods"
        class="payment-card"
        [class.disabled]="!method.available"
        (click)="method.available && selectPaymentMethod(method.id)">
        <div class="payment-icon">{{ method.icon }}</div>
        <div class="payment-name">{{ method.name }}</div>
        <div class="payment-status" *ngIf="!method.available">Coming Soon</div>
      </div>
    </div>
    <p class="payment-note">üîí All transactions are secure and encrypted</p>
  </div>
</section>

<!-- UPI Modal -->
<div class="modal-overlay" *ngIf="showUpiModal" (click)="closeModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <button class="modal-close" (click)="closeModal()">√ó</button>
    <div class="modal-header">
      <div class="modal-icon">üì±</div>
      <h2>Pay via UPI</h2>
      <p>Copy UPI ID and pay using any UPI app</p>
    </div>
    <div class="modal-body">
      <div class="amount-display">
        <span class="amount-label">Amount to Pay</span>
        <span class="amount-value">‚Çπ{{ (customAmount || selectedAmount).toLocaleString() }}</span>
      </div>
      
      <div class="upi-single">
        <div class="upi-label">UPI ID</div>
        <div class="upi-id-display">
          {{ upiIds[0].id }}
        </div>
        <button class="copy-btn-large" (click)="copyUpiId(upiIds[0].id)">
          <span class="copy-icon">üìã</span>
          Copy UPI ID
        </button>
      </div>

      <div class="modal-instructions">
        <h4>How to pay:</h4>
        <ol>
          <li>Copy the UPI ID above</li>
          <li>Open any UPI app (GPay, PhonePe, Paytm, BHIM)</li>
          <li>Go to "Send Money" or "Pay to UPI ID"</li>
          <li>Paste the UPI ID</li>
          <li>Enter amount: ‚Çπ{{ (customAmount || selectedAmount).toLocaleString() }}</li>
          <li>Complete the payment</li>
        </ol>
      </div>

      <button class="modal-btn-primary" (click)="donationCompleted()">
        I've Completed the Payment
      </button>
    </div>
  </div>
</div>

<!-- QR Code Modal -->
<div class="modal-overlay" *ngIf="showQrModal" (click)="closeModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <button class="modal-close" (click)="closeModal()">√ó</button>
    <div class="modal-header">
      <div class="modal-icon">üì≤</div>
      <h2>Scan QR Code</h2>
      <p>Scan with any UPI app to pay</p>
    </div>
    <div class="modal-body">
      <div class="amount-display">
        <span class="amount-label">Amount to Pay</span>
        <span class="amount-value">‚Çπ{{ (customAmount || selectedAmount).toLocaleString() }}</span>
      </div>

      <div class="qr-display">
        <img src="/assets/donation_qr.jpeg" alt="UPI QR Code" class="qr-modal-image">
      </div>

      <div class="modal-instructions">
        <h4>How to scan:</h4>
        <ol>
          <li>Open any UPI app (GPay, PhonePe, Paytm)</li>
          <li>Tap on 'Scan QR Code'</li>
          <li>Scan the QR code above</li>
          <li>Enter amount: ‚Çπ{{ (customAmount || selectedAmount).toLocaleString() }}</li>
          <li>Complete the payment</li>
        </ol>
      </div>

      <button class="modal-btn-primary" (click)="donationCompleted()">
        I've Completed the Payment
      </button>
    </div>
  </div>
</div>

<!-- Bank Transfer Modal -->
<div class="modal-overlay" *ngIf="showBankModal" (click)="closeModal()">
  <div class="modal-content large" (click)="$event.stopPropagation()">
    <button class="modal-close" (click)="closeModal()">√ó</button>
    <div class="modal-header">
      <div class="modal-icon">üèõÔ∏è</div>
      <h2>Bank Transfer Details</h2>
      <p>Transfer directly to our bank account</p>
    </div>
    <div class="modal-body">
      <div class="amount-display">
        <span class="amount-label">Amount to Transfer</span>
        <span class="amount-value">‚Çπ{{ (customAmount || selectedAmount).toLocaleString() }}</span>
      </div>

      <div class="bank-details-modal">
        <div class="detail-row-modal">
          <span class="detail-label">Bank Name</span>
          <div class="detail-value-group">
            <span class="detail-value">{{ bankDetails.bankName }}</span>
          </div>
        </div>

        <div class="detail-row-modal">
          <span class="detail-label">Account Name</span>
          <div class="detail-value-group">
            <span class="detail-value">{{ bankDetails.accountName }}</span>
            <button 
              class="copy-btn-mini"
              (click)="copyToClipboard(bankDetails.accountName, 'modal-accountName')"
              [class.copied]="copiedField === 'modal-accountName'">
              {{ copiedField === 'modal-accountName' ? '‚úì' : 'Copy' }}
            </button>
          </div>
        </div>

        <div class="detail-row-modal">
          <span class="detail-label">Account Number</span>
          <div class="detail-value-group">
            <span class="detail-value">{{ bankDetails.accountNumber }}</span>
            <button 
              class="copy-btn-mini"
              (click)="copyToClipboard(bankDetails.accountNumber, 'modal-accountNumber')"
              [class.copied]="copiedField === 'modal-accountNumber'">
              {{ copiedField === 'modal-accountNumber' ? '‚úì' : 'Copy' }}
            </button>
          </div>
        </div>

        <div class="detail-row-modal">
          <span class="detail-label">IFSC Code</span>
          <div class="detail-value-group">
            <span class="detail-value">{{ bankDetails.ifscCode }}</span>
            <button 
              class="copy-btn-mini"
              (click)="copyToClipboard(bankDetails.ifscCode, 'modal-ifscCode')"
              [class.copied]="copiedField === 'modal-ifscCode'">
              {{ copiedField === 'modal-ifscCode' ? '‚úì' : 'Copy' }}
            </button>
          </div>
        </div>

        <div class="detail-row-modal">
          <span class="detail-label">Branch</span>
          <div class="detail-value-group">
            <span class="detail-value">{{ bankDetails.branch }}</span>
          </div>
        </div>
      </div>

      <div class="modal-instructions">
        <h4>How to transfer:</h4>
        <ol>
          <li>Use the details above to initiate bank transfer</li>
          <li>Transfer amount: ‚Çπ{{ (customAmount || selectedAmount).toLocaleString() }}</li>
          <li>Add "Donation" in the remarks/narration</li>
          <li>Save the transaction receipt</li>
        </ol>
      </div>

      <button class="modal-btn-primary" (click)="donationCompleted()">
        I've Completed the Transfer
      </button>
    </div>
  </div>
</div>

<!-- Thank You Modal -->
<div class="modal-overlay" *ngIf="showThankYouModal" (click)="closeModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <button class="modal-close" (click)="closeModal()">√ó</button>
    <div class="modal-header success">
      <div class="modal-icon success">‚úì</div>
      <h2>Thank You! üíõ</h2>
      <p>Your generosity makes a difference</p>
    </div>
    <div class="modal-body">
      <div class="success-message">
        <p>We've received notification of your donation of <strong>‚Çπ{{ (customAmount || selectedAmount).toLocaleString() }}</strong>.</p>
        <p>You will receive an email receipt with 80G tax certificate details shortly.</p>
      </div>

      <div class="next-steps">
        <h4>What happens next:</h4>
        <ul>
          <li>‚úì Email receipt sent to your inbox</li>
          <li>‚úì 80G tax certificate for 50% exemption</li>
          <li>‚úì Updates on how your donation helps</li>
        </ul>
      </div>

      <button class="modal-btn-primary" (click)="closeModal()">
        Close
      </button>
    </div>
  </div>
</div>

<!-- Bank Details (Alternative) -->
<section class="bank-section fade-in-on-scroll">
  <div class="container">
    <h2 class="section-title">Direct Bank Transfer</h2>
    <p class="section-subtitle">Prefer traditional banking? Transfer directly to our account</p>
    
    <div class="bank-card">
      <div class="bank-header">
        <h3>üè¶ {{ bankDetails.bankName }}</h3>
      </div>
      
      <div class="bank-details-grid">
        <div class="detail-row">
          <span class="detail-label">Account Name</span>
          <div class="detail-value-group">
            <span class="detail-value">{{ bankDetails.accountName }}</span>
            <button 
              class="copy-btn"
              (click)="copyToClipboard(bankDetails.accountName, 'accountName')"
              [class.copied]="copiedField === 'accountName'">
              {{ copiedField === 'accountName' ? '‚úì' : 'üìã' }}
            </button>
          </div>
        </div>

        <div class="detail-row">
          <span class="detail-label">Account Number</span>
          <div class="detail-value-group">
            <span class="detail-value">{{ bankDetails.accountNumber }}</span>
            <button 
              class="copy-btn"
              (click)="copyToClipboard(bankDetails.accountNumber, 'accountNumber')"
              [class.copied]="copiedField === 'accountNumber'">
              {{ copiedField === 'accountNumber' ? '‚úì' : 'üìã' }}
            </button>
          </div>
        </div>

        <div class="detail-row">
          <span class="detail-label">IFSC Code</span>
          <div class="detail-value-group">
            <span class="detail-value">{{ bankDetails.ifscCode }}</span>
            <button 
              class="copy-btn"
              (click)="copyToClipboard(bankDetails.ifscCode, 'ifscCode')"
              [class.copied]="copiedField === 'ifscCode'">
              {{ copiedField === 'ifscCode' ? '‚úì' : 'üìã' }}
            </button>
          </div>
        </div>

        <div class="detail-row">
          <span class="detail-label">Branch</span>
          <div class="detail-value-group">
            <span class="detail-value">{{ bankDetails.branch }}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- QR Code -->
    <div class="qr-section">
      <h3>üì≤ Scan to Pay via UPI</h3>
      <img src="/assets/donation_qr.jpeg" alt="UPI QR Code" class="qr-image">
      <p class="qr-note">Scan with any UPI app (GPay, PhonePe, Paytm)</p>
    </div>
  </div>
</section>

<!-- Tax Benefits & Trust -->
<section class="trust-section fade-in-on-scroll">
  <div class="container">
    <div class="trust-grid">
      <div class="trust-card">
        <div class="trust-icon">üèÜ</div>
        <h3>Registered NGO</h3>
        <p>Officially registered under Indian Trust Act</p>
      </div>
      <div class="trust-card highlight">
        <div class="trust-icon">‚úÖ</div>
        <h3>80G Certified</h3>
        <p>50% tax exemption on all donations</p>
      </div>
      <div class="trust-card">
        <div class="trust-icon">üìä</div>
        <h3>Transparent</h3>
        <p>Detailed reports on fund utilization</p>
      </div>
      <div class="trust-card">
        <div class="trust-icon">üîí</div>
        <h3>Secure</h3>
        <p>All payments are encrypted & safe</p>
      </div>
    </div>
  </div>
</section>

<!-- Recent Donors -->
<section class="recent-donors fade-in-on-scroll">
  <div class="container">
    <h2 class="section-title">Recent Supporters</h2>
    <div class="donors-list">
      <div class="donor-item" *ngFor="let donor of recentDonors">
        <div class="donor-avatar">{{ donor.name.charAt(0) }}</div>
        <div class="donor-info">
          <div class="donor-name">{{ donor.name }}</div>
          <div class="donor-time">{{ donor.time }}</div>
        </div>
        <div class="donor-amount">‚Çπ{{ donor.amount.toLocaleString() }}</div>
      </div>
    </div>
    <p class="join-text">Join {{ fundraisingGoal.donors.toLocaleString() }}+ donors in making a difference!</p>
  </div>
</section>

<!-- FAQ Section -->
<section class="faq-section fade-in-on-scroll">
  <div class="container">
    <h2 class="section-title">Frequently Asked Questions</h2>
    <div class="faq-list">
      <div 
        *ngFor="let faq of faqs; let i = index"
        class="faq-item"
        [class.expanded]="faq.expanded">
        <div class="faq-question" (click)="toggleFaq(i)">
          <span>{{ faq.question }}</span>
          <span class="faq-toggle">{{ faq.expanded ? '‚àí' : '+' }}</span>
        </div>
        <div class="faq-answer" *ngIf="faq.expanded">
          {{ faq.answer }}
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Final CTA -->
<section class="final-cta">
  <div class="container">
    <h2>Every Contribution Counts</h2>
    <p>Together, we can spread happiness to every household</p>
    <button class="cta-btn" (click)="proceedToDonate()">
      Donate Now
    </button>
  </div>
</section>